rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Default rule: Deny all reads and writes to any collection
    // unless explicitly allowed by a more specific rule.
    match /{document=**} {
      allow read, write: if false;
    }

    // Rules for the 'notes' collection
    match /notes/{noteId} {
      // Allow anyone to read, create, update, and delete notes.
      // WARNING: This is insecure for applications with multiple users or sensitive data.
      // Consider implementing Firebase Authentication and changing 'if true' to
      // 'if request.auth != null;' for basic authenticated access, or
      // 'if request.auth.uid == resource.data.userId;' for owner-only write access
      // (assuming a 'userId' field is added to your notes).
      allow read, create, update, delete: if true;
    }

    // Rules for the 'accounts' collection
    match /accounts/{accountId} {
      // Allow anyone to read, create, update, and delete accounts,
      // including adding/removing payments and modifying financial details.
      // WARNING: This is highly insecure for financial data or multi-user applications.
      // Implement Firebase Authentication immediately.
      // Then, change 'if true' to 'if request.auth != null;' for basic authenticated access,
      // or preferably 'if request.auth.uid == resource.data.userId;' for owner-only access
      // (assuming a 'userId' field is added to your accounts).
      // You should also add validation rules for fields like totalDebt, totalPaid, and payment amounts.
      allow read, create, update, delete: if true;
    }
  }
}
